# RecipeCMS

The CMS behind [JustMy.Cooking](https://justmy.cooking). The aim of this CMS was to create a static HTML website that could be uploaded anywhere and did not rely on JS frameworks that required updating or maintaining. This could be hosted anywhere, on anything and it is as secure as the host. For example, Cloudflare Pages!

Instead of being more like a classic CMS where you can interact with a UI and everything is very dynamic, this is just a Python script that reads a bunch of JSON formatted recipes and produces all of your HTML and JS for hosting wherever you want.

If you want to try and use it for yourself, read on. Do take note though, this is a hobby project and very much my first python project. This is a complete mess. I intend on updating it with new features and fixing this spaghetti code mess (somewhat) but there are no guarantees.

---

# Prerequisites

## Environment Variables JSON

Exluded using the `.gitignore`, there is a file called `environment_variables.json` housed within the python folder which is vital for the script to run. An example of the structure of that file can be found in the `variables_template.json` file at the root of this project. You can copy it into the python folder and rename it. Inside are 3 variables which are described below:
- `search_path`  
  This is the path your script will search for recipe JSON files. In the context of this project, that would be the `recipes` folder at the root of the project.
- `url`  
  This is the URL you are using for your website. At the time of writing, this is not used everywhere, so if you were to use the project yourself to create a recipe website you would need to manually update some stuff. You could `ctrl` + `f` to find instances of `justmy.cooking` to find where the url is still hard coded.
- `header`  
  Is a variable which can be used to inject custom HTML into the header. I use it to inject my analytics HTML.

## Python

I used python 3.11.9 to creat this project. It has not been tested with any other version.

## Folder Structure

The folder structure of the project is as follows:

```
root
├───data
├───python
│   ├───main.py
│   ├───environment_variables.json
│   └───utils
|       ├───utils.py
│       └───otherUtils.py
|
└───recipes
    ├───style.css
    ├───favicon.ico
    |
    |───recipeName
    |   |───recipeName.json
    |   └───recipeName_0.jpg
    |
    |───otherRecipeName
    |   |───otherRecipeName.json
    |   └───otherRecipeName_0.jpg
    |
    |───listacles
    |   |───otherListacle.json
    |   └───someListacle.json
    |
    |───shared_notes
    |   |───otherNotes.json
    |   └───someNotes.json
    |
    └───keywords
```

Descriptions for core folders:
- `root`  
  This is just wherever you put the contents of this project.
- `root/data`  
  This folder needs to exist but can just be empty. This folder is used to dump all of the recipe JSONs so you have a nice copy of them all.
- `root/python`  
  This folder contains all of the python code as well as the `environment_variables.json` file.
- `root/recipes`  
  This folder is the root directory of your website. It contains all of the HTML generated by the script. To run the script you will also need to fill it with your JSON definitions for your recipes, listacles and shared notes.
- `root/recipes/recipeName`  
  This is just an example folder for a recipe. You name the folder the same as your recipe name, and then within that folder put your json and any images. See the recipes folder in this project for live examples.
- `root/recipes/listacles`  
  If you create any listacles, this is where you contain the json for them, this will also be where the script will dump any listacle HTML files.
- `root/recipes/shared_notes`  
  If any of your recipes share notes, you can put the json definition of those shared notes in here.
- `root/recipes/keywords`  
  This folder is empty until you run the script, after which it will be filled with keyword html files.
- `root/staging`  
  This folder isn't required, it's just where I keep random things before I promote them to the `root/recipes` folder.

## 5 Recipes

I'm fairly certain you will need at least 5 recipe JSON files in the correct folders (structure described above) for the script to run correctly.

---

# JSON Structures

## Recipe Structure

Below is an example of a blank `recipe.json` that includes all possible fields. Underneath that will be a description of all of the fields and their required content as well as whether they are optional or required. The majority of the this recipe JSON structure is based off of the recipe schema which you can find [here](https://schema.org/Recipe) however I have added additional fields to achieve features specific to my website.

Some fields, such as `diet` don't exist within the official recipe schema. Others like `recipeCuisine` or `recipeCategory` support data types that aren't in the official schema. These fields however are then used to generate a valid recipe schema JSON for the metadata on the website generated by the script allowing for better compatability with SEO and recipe saving applications.

```json
{
  "@context": "https://schema.org/",
  "@type": "Recipe",
  "folder": "folder_name",
  "name": "Pretty Name",
  "image": [
    "image_name_0.jpg"
  ],
  "author": {
    "@type": "Person",
    "name": "F"
  },
  "datePublished": "YYYY-MM-DD",
  "lastMod": "YYYY-MM-DD",
  "description": "",
  "keywords": "",
  "prepTime": "PT",
  "marinatingTime": "PT",
  "cookTime": "PT",
  "totalTime": "PT",
  "recipeYield": "X Servings",
  "recipeCategory": "",
  "recipeCuisine": "",
  "nutrition": {
    "@type": "NutritionInformation",
    "calories": "X calories per serving (estimated)"
  },
  "diet":[
    ""
  ],
  "recipeIngredient": [
    ""
  ],
  "ingredientKeywords": [
    ""
  ],
  "equipment": [
    ""
  ],
  "recipeInstructions": [
    {
      "@type": "HowToStep",
      "name": "",
      "url": 1,
      "text": ""
    },
    {
      "@type": "HowToStep",
      "name": "",
      "url": 2,
      "text": ""
    }
  ],
  "notes": [
    ""
  ],
  "sharedNotes": [
    ""
  ],
  "relatedRecipes": [
    ""
  ]
}
```

- ### `@context`  
  **Type**: String  
  **Value**: Fixed, it must have the value `https://schema.org/`  

- ### `@type`
  **Type**: String  
  **Value**: Fixed, it must have the value `Recipe`  

- ### `folder`
  **Type**: String  
  **Value**: The folder name where the recipe JSON file is located. This is not the full path to the folder, but just the folder name within the `recipes` folder.   
  **Example**: If you create a recipe in the folder `beef_curry` then the value of folder must be `beef_curry`.  

- ### `name`
  **Type**: String  
  **Value**: The pretty name for the recipe that will show as the title at the top of the page and in the recipe cards in lists.  
  **Example**: If you create a recipe in the folder `beef_curry` then the name of the recipe might be something like `Beef Curry`.  

- ### `image`
  **Type**: String[]  
  **Value**: A list of file names for the recipe pictures. These images must be within the folder referenced within the `folder` field.
  **Example**: If you create a recipe in the folder `beef_curry` then you might have a few images. The image field would then be array looking like `["beef_curry_0.jpg", "beef_curry_1.jpg", "beef_curry_2.jpg"]`  
  **Notes**: Currently only the first image in the array is used. The first image is used as the image within recipe cards as well as the image used at the top of the recipes page.

- ### `author`
  **Type**: Object  
  **Value**: Contains `author.@type` and `author.name`  
  - `author.@type`
    **Type**: String  
    **Value**: You can use any value supported by the official recipe schema but I just use `Person`  
  - `author.name`
    **Type**: String  
    **Value**: Whatever name you like. This would be the name of the person that created the recipe.  

- ### `datePublished`
  **Type**: String   
  **Value**: This is the date you published the recipe in YYYY-MM-DD format.  
  **Example**: 2026-01-30  
  **Notes**: Shows up in the metadata section of the recipe page underneath the main image.

- ### `lastMod`
  **Type**: String   
  **Value**: This is the date you last modified the recipe in YYYY-MM-DD format.  
  **Example**: 2026-02-15  
  **Notes**: If this is greater than the value of `datePublished` then it will show up on the recipe page beside `datePublished`.

- ### `description`
  **Type**: String    
  **Value**: This is the description for your recipe  
  **Example**: Great juicy chicken wings made for... idk.   

- ### `keywords`
  **Type**: String    
  **Value**: Comma space seperated list of keywords.   
  **Example**: `Wings, BBQ, Food, Something`   
  **Notes**: These keywords are only used in the recipe schema metadata attached to the HTML of each page and don't actually show up anywhere.

- ### `prepTime`
  **Type**: String    
  **Value**: The time for preparation in iso8601 format.   
  **Example**: For 2 hours and 30 minutes it would be `PT2H30M`   
  **Notes**: The format is what is used in the official recipe schema.

- ### `marinatingTime`  
  **OPTIONAL**
  **Type**: String    
  **Value**: The time for marinating in iso8601 format.   
  **Example**: For 2 hours and 30 minutes it would be `PT2H30M`   
  **Notes**: The format is what is used in the official recipe schema.

- ### `cookTime`
  **Type**: String    
  **Value**: The active cooking time in iso8601 format.   
  **Example**: For 2 hours and 30 minutes it would be `PT2H30M`   
  **Notes**: The format is what is used in the official recipe schema.

- ### `totalTime`
  **Type**: String    
  **Value**: The total time is takes to make the recipe in iso8601 format. This is from start to finish.   
  **Example**: For 2 hours and 30 minutes it would be `PT2H30M`   
  **Notes**: The format is what is used in the official recipe schema.

- ### `recipeYield`
  **Type**: String    
  **Value**: The amount made. This could be serving counts or total amount produced.   
  **Example**: `4 Servings` or `250ml` or `10 Slices`   

- ### `recipeCategory`
  **Type**: String[]    
  **Value**: The type of recipe like a main meal or snack or drink.   
  **Example**: An example for wontons could be `["Side Dish", "Appetizer", "Starter", "Soup Component"]`    
  **Notes**: The script will take the first value and use that for the recipe schema for the HTML pages it generates. However each value from the whole array will be used for linking the recipe to pages containing all other recipes in that category. These values are also used for the search function.

- ### `recipeCuisine`
  **Type**: String[]    
  **Value**: The (rough) origin for the recipe.   
  **Example**: An example for wontons could be `["Chinese", "Asian"]`    
  **Notes**: The script will take the first value and use that for the recipe schema for the HTML pages it generates. However each value from the whole array will be used for linking the recipe to pages containing all other recipes in that cuisine. These values are also used for the search function.

- ### `nutrition`
  **OPTIONAL**
  **Type**: Object  
  **Value**: Contains `nutrition.@type` and `nutrition.calories`. While it is optional, SEO optimizers have suggested that I include it so I do.   
  - `nutrition.@type`
    **Type**: String  
    **Value**: You can use any value supported by the official recipe schema but I just use `NutritionInformation`  
  - `nutrition.calories`
    **Type**: String  
    **Value**: This can really be any string but I normally format it as `30 Calories (Estimated)` because I estimate the calories rather than doing proper calculations.  

- ### `diet`
  **Type**: String[]    
  **Value**: An array of strings, each string being a diet that the recipe is suitable for. These are to be human readable. Has proper support for the following values `["Diabetic", "Gluten Free", "Halal", "Hindu", "Kosher", "Low Calorie", "Low Fat", "Low Lactose", "Low Salt", "Vegan", "Vegetarian"]` as per the official recipe schema however you can add whatever values you like, such as `Keto`.   
  **Example**: An array of values such as `["Vegan", "Vegetarian"]`  
  **Notes**: The script will take the officially supported values and add them, modified, to a field called `suitableForDiet` which is supported by the official recipe schema. It will also, just like the `cuisine`, `category`, `ingredientKeywords` and `equipment` fields, take the values and create pages containing all recipes that share that diet.


- ### `recipeIngredient`
  **Type**: String[]    
  **Value**: An array of strings, each string being an ingredient. These are to be human readable. Additionally you can add empty strings to add breaks or add colons to the end of a string to make it a header.   
  **Example**: You could have something like `["Wonton Filling:", "500g Pork Mince", "", "Other:", "40 Wonton Wrappers"]`   
  **Notes**: The above example would have 2 headings and a break inbetween the sections allowing for better presentation. These headers and breaks are removed from this field for the actual JSON metadata attached to the HTML files produced as they aren't supported in the actual recipe schema.

- ### `ingredientKeywords`
  **Type**: String[]    
  **Value**: An array of strings, each string being an ingredient keyword. Each of these should not be plurals, including things like seeds. Instead of Sesame Seeds it would be Sesame Seed.     
  **Example**: Using the above wonton example for ingredients you could have `["Pork", "Pork Mince", "Wonton Wrapper"]`   
  **Notes**: These keywords are used for linking purposes allowing the script to generate ingredient pages that contain all recipes using that ingredient. Links to these ingredient pages are embeded in the list of ingredients generated on each recipe page. Even though the keywords should not be plural, the script will find plural variations for linking in the ingredients list. If your keywords and ingredients lists don't line up the linking wont work. These are also used for the search function.

- ### `equipment`  
  **OPTIONAL**
  **Type**: String[]    
  **Value**: An array of strings, each string being an equipment used for preparing the recipe.    
  **Example**: For the wontons you would have `["Bowl"]`. You definitely can add as many things as you like, such as knives and spoons, however I normally just include the major items.   
  **Notes**: These values are used for linking to pages that contain all recipes that use the equipment.

- ### `recipeInstructions`
  **Type**: Object[]   
  **Value**: Contains `recipeInstructions.@type`, `recipeInstructions.name`, `recipeInstructions.url` and `recipeInstructions.text`.   
  - `recipeInstructions.@type`  
    **Type**: String   
    **Value**: It is always `HowToStep`  
  - `recipeInstructions.name`  
    **Type**: String    
    **Value**: This is a brief name of the step.  
    **Example**: This could be something like `Fold Wontons` or `Mix Filling`  
    **Notes**: This value is not used on the website but in the metadata.   
  - `recipeInstructions.url`  
    **Type**: Integer   
    **Value**: The number of the step.   
    **Example**: `1` or `2` etc  
    **Notes**: This number is then transformed into an actual URL for the recipe schema  
  - `recipeInstructions.text`  
    **Type**: String  
    **Value**: This is the actual full detail description for a step.
    **Example**: For the wontons `Add the pork mince, garlic and other filling ingredients and mix thoroughly ensuring even distribution of ingredients.`  
    **Notes**: This value is used to actually populate the steps section on each recipes page.  

- ### `notes`
  **Type**: String[]    
  **Value**: An array of strings where each string is a note about this specific recipe.    
  **Example**: For wontons `["The timings for these wontons is based on me making them with my family", "I normally fit the filling into about 40 wrappers"]`   
  **Notes**: These notes should be unique to the recipe and each one will show up in the notes section of the recipe HTML produced.

- ### `sharedNotes`  
  **OPTIONAL**
  **Type**: String[]    
  **Value**: An array of strings where each string is the name of a shared notes JSON.   
  **Example**: As an example my beef jerky recipes all share notes, they're all stored in `jerky.json` which can be referenced like `["jerky"]`. You can specify multiple if there are multiple shared notes.  
  **Notes**: This field references the name of shared notes within the `shared_notes` folder. This allows you to have multiple recipes share relevant notes preventing you from having to maintain the same notes across multiple recipes.

- ### `relatedRecipes`  
  **OPTIONAL**
  **Type**: String[]    
  **Value**: An array of strings where each string is the value of `folder` for another recipe.   
  **Example**: For wontons you could have `["wonton_soup", "hotpot"]`   
  **Notes**: This effects what other recipes are shown on the HTML page for this recipe. If not specified, the script will just link 4 random recipes.


## Listacle JSON Structure

``` json
{
    "name": "Listacle Name",
    "datePublished": "2025-05-31",
    "lastMod": "2025-05-31",
    "folder": "listacle_template",
    "description": "Some description",
    "image": "recipeName",
    "recipes": [
        {
            "folder": "recipeName",
            "description": "A custom description of this recipe for the listacle."
        },
        {
            "folder": "recipeName2",
            "description": "A custom description of this recipe for the listacle."
        }
    ]
}
```

## Shared Notes JSON Structure

``` json
{
    "name": "Notes name",
    "folder": "notes_name",
    "description": "Notes title that shows on recipe pages that reference it",
    "notes": [
        "Some notes that are shared between multiple recipes 1",
        "Some notes that are shared between multiple recipes 2"
    ]
}
```