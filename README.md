# RecipeCMS

The CMS behind [JustMy.Cooking](https://justmy.cooking). The aim of this CMS was to create a static HTML website that could be uploaded anywhere and did not rely on JS frameworks that required updating or maintaining. This could be hosted anywhere, on anything and it is as secure as the host. For example, Cloudflare Pages!

If you want to try and use it for yourself, read on. Do take note though, this is a hobby project and very much my first python project. This is a complete mess. I intend on updating it with new features and fixing this spaghetti code mess (somewhat) but there are no guarantees.

---

# Prerequisites

## Environment Variables JSON

Exluded using the `.gitignore`, there is a file called `environment_variables.json` housed within the python folder which is vital for the script to run. An example of the structure of that file can be found in the `variables_template.json` file at the root of this project. You can copy it into the python folder and rename it. Inside are 3 variables which are described below:
- `search_path`  
  This is the path your script will search for recipe JSON files. In the context of this project, that would be the `recipes` folder at the root of the project.
- `url`  
  This is the URL you are using for your website. At the time of writing, this is not used everywhere, so if you were to use the project yourself to create a recipe website you would need to manually update some stuff. You could `ctrl` + `f` to find instances of `justmy.cooking` to find where the url is still hard coded.
- `header`  
  Is a variable which can be used to inject custom HTML into the header. I use it to inject my analytics HTML.

## Python

I used python 3.11.9 to creat this project. It has not been tested with any other version.

## Folder Structure

The folder structure of the project is as follows:

```
root
├───data
├───python
│   ├───main.py
│   ├───environment_variables.json
│   └───utils
|       ├───utils.py
│       └───otherUtils.py
|
└───recipes
    ├───style.css
    ├───favicon.ico
    |
    |───recipeName
    |   |───recipeName.json
    |   └───recipeName_0.jpg
    |
    |───otherRecipeName
    |   |───otherRecipeName.json
    |   └───otherRecipeName_0.jpg
    |
    |───listacles
    |   |───otherListacle.json
    |   └───someListacle.json
    |
    |───shared_notes
    |   |───otherNotes.json
    |   └───someNotes.json
    |
    └───keywords
```

Descriptions for core folders:
- `root`  
  This is just wherever you put the contents of this project.
- `root/data`  
  This folder needs to exist but can just be empty. This folder is used to dump all of the recipe JSONs so you have a nice copy of them all.
- `root/python`  
  This folder contains all of the python code as well as the `environment_variables.json` file.
- `root/recipes`  
  This folder is the root directory of your website. It contains all of the HTML generated by the script. To run the script you will also need to fill it with your JSON definitions for your recipes, listacles and shared notes.
- `root/recipes/recipeName`  
  This is just an example folder for a recipe. You name the folder the same as your recipe name, and then within that folder put your json and any images. See the recipes folder in this project for live examples.
- `root/recipes/listacles`  
  If you create any listacles, this is where you contain the json for them, this will also be where the script will dump any listacle HTML files.
- `root/recipes/shared_notes`  
  If any of your recipes share notes, you can put the json definition of those shared notes in here.
- `root/recipes/keywords`  
  This folder is empty until you run the script, after which it will be filled with keyword html files.
- `root/staging`  
  This folder isn't required, it's just where I keep random things before I promote them to the `root/recipes` folder.

## 5 Recipes

I'm fairly certain you will need at least 5 recipe JSON files in the correct folders (structure described above) for the script to run correctly.

---

# JSON Structures

## Recipe Structure

Below is an example of a blank `recipe.json` that includes all possible fields. Underneath that will be a description of all of the fields and their required content as well as whether they are optional or required. The majority of the this recipe JSON structure is based off of the recipe schema which you can find [here](https://schema.org/Recipe) however I have added additional fields to achieve features specific to my website.

Some fields, such as `diet` don't exist within the official recipe schema. Others like `recipeCuisine` or `recipeCategory` support data types that aren't in the official schema. These fields however are then used to generate a valid recipe schema JSON for the metadata on the website generated by the script allowing for better compatability with SEO and recipe saving applications.

```json
{
  "@context": "https://schema.org/",
  "@type": "Recipe",
  "folder": "folder_name",
  "name": "Pretty Name",
  "image": [
    "image_name_0.jpg"
  ],
  "author": {
    "@type": "Person",
    "name": "F"
  },
  "datePublished": "YYYY-MM-DD",
  "lastMod": "YYYY-MM-DD",
  "description": "",
  "keywords": "",
  "prepTime": "PT",
  "marinatingTime": "PT",
  "cookTime": "PT",
  "totalTime": "PT",
  "recipeYield": "X Servings",
  "recipeCategory": "",
  "recipeCuisine": "",
  "nutrition": {
    "@type": "NutritionInformation",
    "calories": "X calories per serving (estimated)"
  },
  "diet":[
    ""
  ],
  "recipeIngredient": [
    ""
  ],
  "ingredientKeywords": [
    ""
  ],
  "equipment": [
    ""
  ],
  "recipeInstructions": [
    {
      "@type": "HowToStep",
      "name": "",
      "url": 1,
      "text": ""
    },
    {
      "@type": "HowToStep",
      "name": "",
      "url": 2,
      "text": ""
    }
  ],
  "notes": [
    ""
  ],
  "sharedNotes": [
    ""
  ],
  "relatedRecipes": [
    ""
  ]
}
```

- ### `@context`  
  **Type**: String  
  **Value**: Fixed, it must have the value `https://schema.org/`  

- ### `@type`
  **Type**: String  
  **Value**: Fixed, it must have the value `Recipe`  

- ### `folder`
  **Type**: String  
  **Value**: The folder name where the recipe JSON file is located. This is not the full path to the folder, but just the folder name within the `recipes` folder.   
  **Example**: If you create a recipe in the folder `beef_curry` then the value of folder must be `beef_curry`.  

- ### `name`
  **Type**: String  
  **Value**: The pretty name for the recipe that will show as the title at the top of the page and in the recipe cards in lists.  
  **Example**: If you create a recipe in the folder `beef_curry` then the name of the recipe might be something like `Beef Curry`.  

- ### `image`
  **Type**: String[]  
  **Value**: A list of file names for the recipe pictures. These images must be within the folder referenced within the `folder` field.
  **Example**: If you create a recipe in the folder `beef_curry` then you might have a few images. The image field would then be array looking like `["beef_curry_0.jpg", "beef_curry_1.jpg", "beef_curry_2.jpg"]`  
  **Notes**: Currently only the first image in the array is used. The first image is used as the image within recipe cards as well as the image used at the top of the recipes page.

### `author`

Contains:
- `author.@type`
- `author.name`

### `datePublished`

### `lastMod`

### `description`

### `keywords`

### `prepTime`

### `marinatingTime`  
**OPTIONAL**

### `cookTime`

### `totalTime`

### `recipeYield`

### `recipeCategory`

### `recipeCuisine`

### `nutrition`

Contains:
- `nutrition.@type`
- `nutrition.calories`

### `recipeIngredient`

### `ingredientKeywords`

### `equipment`  
**OPTIONAL**

### `recipeInstructions`

Contains:
- `recipeInstructions.@type`
- `recipeInstructions.name`
- `recipeInstructions.url`
- `recipeInstructions.text`

### `notes`

### `sharedNotes`  
**OPTIONAL**

### `relatedRecipes`  
**OPTIONAL**